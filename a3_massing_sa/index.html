
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Spatial Analysis - Docking Station</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Montserrat";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../css/pandas-dataframe.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="none" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-spatial-analysis" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Docking Station" class="md-header__button md-logo" aria-label="Docking Station" data-md-component="logo">
      
  <img src="../img/klein.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docking Station
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Spatial Analysis
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Docking Station" class="md-nav__button md-logo" aria-label="Docking Station" data-md-component="logo">
      
  <img src="../img/klein.png" alt="logo">

    </a>
    Docking Station
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Planning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Planning" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Planning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a1_planning_process/" class="md-nav__link">
        Process
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a1_planning_products/" class="md-nav__link">
        Products
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Configuring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuring" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Configuring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          Process
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Process" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Process
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a2_configuring_process_designprinciples/" class="md-nav__link">
        Design Principles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a2_configuring_process_voxelsize/" class="md-nav__link">
        Voxelsize
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a2_configuring_products/" class="md-nav__link">
        Products
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../a3_massing/" class="md-nav__link">
        Massing
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Massing_test
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Massing_test" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Massing_test
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          Process
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Process" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Process
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a3_massing_intro/" class="md-nav__link">
        Intro
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Spatial Analysis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Spatial Analysis
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-distance-to-entrance" class="md-nav__link">
    The Distance to Entrance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-noise-field-from-street" class="md-nav__link">
    The noise field from street
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-solar-envelope" class="md-nav__link">
    The Solar Envelope
  </a>
  
    <nav class="md-nav" aria-label="The Solar Envelope">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sun-light-access" class="md-nav__link">
    Sun Light Access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shadowing" class="md-nav__link">
    Shadowing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-sky-view-factor" class="md-nav__link">
    The Sky View Factor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-distance-to-facade" class="md-nav__link">
    The Distance to Facade
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pesudocode" class="md-nav__link">
    Pesudocode
  </a>
  
    <nav class="md-nav" aria-label="Pesudocode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-solar-envelope_1" class="md-nav__link">
    The Solar envelope
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-sky-view-factor_1" class="md-nav__link">
    The sky view factor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-distance-to-facade_1" class="md-nav__link">
    The Distance to Facade
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a3_massing_shaping/" class="md-nav__link">
        Shaping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a3_massing_abm/" class="md-nav__link">
        ABM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a3_massing_shafts_corridors/" class="md-nav__link">
        Shafts and corridors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../a4_forming/" class="md-nav__link">
        Forming
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Index
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Index" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Index
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_1" type="checkbox" id="__nav_8_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_1">
          Scripts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Scripts" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          Scripts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s1.1_voxelization_highres/" class="md-nav__link">
        Step 1.1 Voxelization high resolution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s1.2_voxelization_lowres/" class="md-nav__link">
        Step 1.2 Voxelization low resolution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s2.1_solar_envelope/" class="md-nav__link">
        Step 2.1 Solar envelope
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s2.2_shaping/" class="md-nav__link">
        Step 2.2 Shaping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s2.3_visualisation_solarenv/" class="md-nav__link">
        Step 2.3 Visualization solar envelope
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s3.1_Skyview/" class="md-nav__link">
        Step 3.1 Skyview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s3.2_Noise_field_from_street/" class="md-nav__link">
        Step 3.2 Noise field from street
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s3.3_distance_to_facade/" class="md-nav__link">
        Step 3.3 Distance to facade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s3.4_distance_to_entrance/" class="md-nav__link">
        Step 3.4 Distance to entrance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s4_interpolation_skyview/" class="md-nav__link">
        Step 4 Interpolation Skyview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s4_interpolation_sun_access/" class="md-nav__link">
        Step 4 Interpolation sun access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s4_interpolation_sun_blockage/" class="md-nav__link">
        Step 4 Interpolation sun blockage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s6.1_ABM_growth/" class="md-nav__link">
        Step 6.1 ABM Growth model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s6.2_ABM_visual/" class="md-nav__link">
        Step 6.2 Visualization ABM model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s7_Shafts_corridors/" class="md-nav__link">
        Step 7 Shafts and corridors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s8.1_polgonization_facade2/" class="md-nav__link">
        Step 8.1 Polygonization Facade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/s8.2_polgonization_structure/" class="md-nav__link">
        Step 8.2 Polygonization structure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../index/figures/" class="md-nav__link">
        Figures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../index/presentations/" class="md-nav__link">
        Presentations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../index/bibliography/" class="md-nav__link">
        Bibliography
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Documenting (TBR)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Documenting (TBR)" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Documenting (TBR)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../documenting/instructions/" class="md-nav__link">
        Instructions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../documenting/folder_structure/" class="md-nav__link">
        Folder Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../documenting/guidelines/" class="md-nav__link">
        Guidelines
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-distance-to-entrance" class="md-nav__link">
    The Distance to Entrance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-noise-field-from-street" class="md-nav__link">
    The noise field from street
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-solar-envelope" class="md-nav__link">
    The Solar Envelope
  </a>
  
    <nav class="md-nav" aria-label="The Solar Envelope">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sun-light-access" class="md-nav__link">
    Sun Light Access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shadowing" class="md-nav__link">
    Shadowing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-sky-view-factor" class="md-nav__link">
    The Sky View Factor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-distance-to-facade" class="md-nav__link">
    The Distance to Facade
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pesudocode" class="md-nav__link">
    Pesudocode
  </a>
  
    <nav class="md-nav" aria-label="Pesudocode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-solar-envelope_1" class="md-nav__link">
    The Solar envelope
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-sky-view-factor_1" class="md-nav__link">
    The sky view factor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-distance-to-facade_1" class="md-nav__link">
    The Distance to Facade
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="the-spatial-analysis"><strong>The Spatial Analysis</strong></h1>
<p>The spatial analysis consists of the calculations for  </p>
<ul>
<li>Distance to entrance</li>
<li>
<p>Noise field from street</p>
</li>
<li>
<p>Solar envelope</p>
</li>
<li>Sky view factor</li>
<li>Distance to facade</li>
</ul>
<h2 id="the-distance-to-entrance"><strong>The Distance to Entrance</strong></h2>
<p>(Place Holder @Paolo)</p>
<h2 id="the-noise-field-from-street"><strong>The noise field from street</strong></h2>
<p>(Place Holder @Paolo)</p>
<h2 id="the-solar-envelope"><strong>The Solar Envelope</strong></h2>
<p>The Solar Envelope is one word for both sun light access and shadow analysis. The shadow analysis will furthermore be used in shaping of the envelope.</p>
<h3 id="sun-light-access"><strong>Sun Light Access</strong></h3>
<p>For the sun light we choose 4 days representing 4 typical days in 4 seasons at the building's location.  </p>
<div class="codehilite"><pre><span></span><code><span class="n">sp</span> <span class="o">=</span> <span class="n">Sunpath</span><span class="p">(</span><span class="n">longitude</span><span class="o">=</span><span class="mf">4.3571</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="mf">52.0116</span><span class="p">)</span>

<span class="n">hoys</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">sun_vectors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">day_multiples</span> <span class="o">=</span> <span class="mi">90</span>

<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">365</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">d</span><span class="o">%</span><span class="n">day_multiples</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">):</span>
            <span class="n">hoy</span> <span class="o">=</span> <span class="n">d</span><span class="o">*</span><span class="mi">24</span> <span class="o">+</span> <span class="n">h</span>
            <span class="n">sun</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">calculate_sun_from_hoy</span><span class="p">(</span><span class="n">hoy</span><span class="p">)</span>
            <span class="n">sun_vector</span> <span class="o">=</span> <span class="n">sun</span><span class="o">.</span><span class="n">sun_vector</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">sun_vector</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">hoys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hoy</span><span class="p">)</span>
                <span class="n">sun_vectors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sun_vector</span><span class="p">)</span>
</code></pre></div>

<p>Then we set the sun light to the reverse direction and shoot them from each voxel of the lattice.  </p>
<div class="codehilite"><pre><span></span><code><span class="n">sun_dirs</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">converted_sun_vectors</span><span class="p">)</span>
<span class="n">vox_cens</span> <span class="o">=</span> <span class="n">envelope_lattice</span><span class="o">.</span><span class="n">centroids</span>

<span class="k">for</span> <span class="n">v_cen</span> <span class="ow">in</span> <span class="n">vox_cens</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">s_dir</span> <span class="ow">in</span> <span class="n">sun_dirs</span><span class="p">:</span>
        <span class="n">ray_dir</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s_dir</span><span class="p">)</span>
        <span class="n">ray_src</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v_cen</span><span class="p">)</span>
</code></pre></div>

<p>Finally we count the percentage that those rays will be blocked.</p>
<div class="codehilite"><pre><span></span><code><span class="n">sun_access</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">int_count</span><span class="o">/</span><span class="n">sun_count</span> 
</code></pre></div>

<p><center>
    <img alt="" src="../img/a3/sa/sunlight.png" />
</center></p>
<h3 id="shadowing"><strong>Shadowing</strong></h3>
<p>The shadow casted by this building is done by a similar idea. The only thing changed was to choose the original sun light directions (instead of reversed ones), such that from those rays shooted, we can know the percentage of time how the building could possibly block sun light for the surrounding buildings.   </p>
<p><center>
    <img alt="" src="../img/a3/sa/sunblock.png" />
</center></p>
<h2 id="the-sky-view-factor"><strong>The Sky View Factor</strong></h2>
<p>The sky view factor means the percentage of open sky we can see at a specific point. In places like midtown Manhatten, the sky view factor is very low due to the large amount of sky scrapers. And in comparison, in the middle of a desert the sky view factor and be close to 1, as there is no blockage anywhere.  </p>
<p>This idea can be useful in tackling Urban Heat Island Effect. It is also interesting to use it for other interesting measures.  </p>
<p>The implementation of it is rather simple. Using the same library as above, we can create a semisphere of rays.  </p>
<p><center>
    <img alt="" src="../img/a3/sa/semisphere.png" />
</center></p>
<p>Then we compute the percentage that those rays hit the surroundings.</p>
<p><center>
    <img alt="" src="../img/a3/sa/skyviewfactor.png" />
</center></p>
<h2 id="the-distance-to-facade"><strong>The Distance to Facade</strong></h2>
<p>The distance to facade means basically the closest distance from the voxel to outside. By calculating the inner voxels, we get the lattice of the facade.</p>
<p><center>
    <img alt="" src="../img/a3/sa/facade.png" />
</center></p>
<p>Then we calculate the euclidian distance from the voxel to every facade points. Even though I did not manage to do a manifold one, the end result shall be identical.</p>
<p><center>
    <img alt="" src="../img/a3/sa/disfacade.png" />
</center></p>
<h2 id="pesudocode"><strong>Pesudocode</strong></h2>
<p>We provide Pesudocode for this part</p>
<h3 id="the-solar-envelope_1"><strong>The Solar envelope</strong></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># initialization</span>
<span class="kn">import</span> <span class="nn">numpy</span><span class="o">,</span> <span class="nn">topogenesis</span><span class="o">,</span> <span class="nn">ladybug</span><span class="o">,</span> <span class="nn">...</span>
<span class="n">load</span> <span class="n">optional_envelope</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">immediate_context</span><span class="o">.</span><span class="n">obj</span>
<span class="n">read</span> <span class="n">voxelized_envelope_lowres</span><span class="o">.</span><span class="n">csv</span> <span class="o">&amp;</span> <span class="n">transform</span> <span class="n">to</span> <span class="n">envelope_lattice</span>

<span class="c1"># compute sum vectors</span>
<span class="nb">set</span> <span class="n">latitude</span> <span class="o">&amp;</span> <span class="n">longitute</span>
<span class="k">for</span> <span class="n">the</span> <span class="n">first</span> <span class="n">day</span> <span class="n">of</span> <span class="n">each</span> <span class="n">season</span><span class="p">:</span>
    <span class="k">for</span> <span class="mi">24</span> <span class="n">hours</span><span class="p">:</span>
        <span class="n">calculate</span> <span class="n">sun_vector</span>
        <span class="k">if</span> <span class="n">sun_vector</span> <span class="n">below</span> <span class="n">horizontal</span><span class="p">:</span>
            <span class="n">add</span> <span class="n">sun_vector</span>
<span class="n">rotate</span> <span class="n">sun_vector</span> <span class="n">by</span> <span class="mf">36.324</span>

<span class="c1"># create sun directions and sun sources</span>
<span class="k">for</span> <span class="n">cen</span> <span class="ow">in</span> <span class="n">voxel_cens</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">sun_dir</span> <span class="ow">in</span> <span class="n">sun_vector</span><span class="p">:</span>
        <span class="n">ray_src</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cen</span><span class="p">)</span>
        <span class="n">ray_dir</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sun_dir</span><span class="p">)</span>
<span class="p">(</span><span class="n">do</span> <span class="n">the</span> <span class="n">same</span> <span class="n">but</span> <span class="n">negative</span> <span class="n">to</span> <span class="n">obtian</span> <span class="n">ray_dir2</span><span class="p">)</span>

<span class="c1"># calculation</span>
<span class="n">tri_id</span><span class="p">,</span> <span class="n">ray_id</span> <span class="o">=</span> <span class="n">context_mesh</span><span class="o">.</span><span class="n">ray</span><span class="o">.</span><span class="n">intersects_id</span><span class="p">(</span><span class="n">ray_src</span><span class="p">,</span> <span class="n">ray_dir</span><span class="p">,</span> <span class="n">multiple_hits</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">tri_id2</span><span class="p">,</span> <span class="n">ray_id2</span> <span class="o">=</span> <span class="n">context_mesh</span><span class="o">.</span><span class="n">ray</span><span class="o">.</span><span class="n">intersects_id</span><span class="p">(</span><span class="n">ray_src</span><span class="p">,</span> <span class="n">ray_dir2</span><span class="p">,</span> <span class="n">multiple_hits</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># calculate the percentage of hitting</span>
<span class="k">for</span> <span class="n">voxels</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">rays</span><span class="p">:</span>
        <span class="n">add</span> <span class="n">hits</span> <span class="n">to</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">voxel</span>
    <span class="n">compute</span> <span class="n">hits</span><span class="o">/</span><span class="p">(</span><span class="n">total</span> <span class="n">rays</span><span class="p">)</span>
    <span class="n">store</span> <span class="n">the</span> <span class="n">result</span>

<span class="c1"># transform to a lattice</span>
<span class="k">for</span> <span class="n">flattened</span> <span class="n">avail</span> <span class="n">lattice</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">avail</span><span class="p">:</span>
        <span class="n">append</span> <span class="n">the</span> <span class="n">percentage</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">append</span> <span class="mi">0</span>
<span class="n">reshape</span> <span class="n">to</span> <span class="n">create</span> <span class="n">a</span> <span class="n">lattice</span>

<span class="c1"># visualization and saving</span>
<span class="n">visualize</span>
<span class="n">save</span> <span class="n">to</span> <span class="n">csv</span>
</code></pre></div>

<h3 id="the-sky-view-factor_1"><strong>The sky view factor</strong></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># initialization</span>
<span class="kn">import</span> <span class="nn">numpy</span><span class="o">,</span> <span class="nn">topogenesis</span><span class="o">,</span> <span class="nn">ladybug</span><span class="o">,</span> <span class="nn">...</span>
<span class="n">load</span> <span class="n">optional_envelope</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">immediate_context</span><span class="o">.</span><span class="n">obj</span>
<span class="n">read</span> <span class="n">voxelized_envelope_lowres</span><span class="o">.</span><span class="n">csv</span> <span class="o">&amp;</span> <span class="n">transform</span> <span class="n">to</span> <span class="n">envelope_lattice</span>

<span class="c1"># compute sum vectors</span>
<span class="n">create</span> <span class="n">icosphere</span>
<span class="k">if</span> <span class="n">icosphere</span> <span class="n">above</span> <span class="n">horizontal</span><span class="p">:</span>
    <span class="n">add</span> <span class="n">sun_vector</span>

<span class="c1"># The Latter part is identical to solar_envelope file</span>

<span class="c1"># create sun directions and sun sources</span>
<span class="k">for</span> <span class="n">cen</span> <span class="ow">in</span> <span class="n">voxel_cens</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">sun_dir</span> <span class="ow">in</span> <span class="n">sun_vector</span><span class="p">:</span>
        <span class="n">ray_src</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cen</span><span class="p">)</span>
        <span class="n">ray_dir</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sun_dir</span><span class="p">)</span>

<span class="c1"># calculation</span>
<span class="n">tri_id</span><span class="p">,</span> <span class="n">ray_id</span> <span class="o">=</span> <span class="n">context_mesh</span><span class="o">.</span><span class="n">ray</span><span class="o">.</span><span class="n">intersects_id</span><span class="p">(</span><span class="n">ray_src</span><span class="p">,</span> <span class="n">ray_dir</span><span class="p">,</span> <span class="n">multiple_hits</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># calculate the percentage of hitting</span>
<span class="k">for</span> <span class="n">voxels</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">rays</span><span class="p">:</span>
        <span class="n">add</span> <span class="n">hits</span> <span class="n">to</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">voxel</span>
    <span class="n">compute</span> <span class="n">hits</span><span class="o">/</span><span class="p">(</span><span class="n">total</span> <span class="n">rays</span><span class="p">)</span>
    <span class="n">store</span> <span class="n">the</span> <span class="n">result</span>

<span class="c1"># transform to a lattice</span>
<span class="k">for</span> <span class="n">flattened</span> <span class="n">avail</span> <span class="n">lattice</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">avail</span><span class="p">:</span>
        <span class="n">append</span> <span class="n">the</span> <span class="n">percentage</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">append</span> <span class="mi">0</span>
<span class="n">reshape</span> <span class="n">to</span> <span class="n">create</span> <span class="n">a</span> <span class="n">lattice</span>

<span class="c1"># visualization and saving</span>
<span class="n">visualize</span>
<span class="n">save</span> <span class="n">to</span> <span class="n">csv</span>
</code></pre></div>

<h3 id="the-distance-to-facade_1"><strong>The Distance to Facade</strong></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># initialization</span>
<span class="kn">import</span> <span class="nn">numpy</span><span class="o">,</span> <span class="nn">topogenesis</span><span class="o">,</span> <span class="nn">...</span>

<span class="c1"># load lattice</span>
<span class="n">read</span> <span class="n">lattice</span><span class="o">.</span><span class="n">csv</span> <span class="o">&amp;</span> <span class="n">transform</span> <span class="n">to</span> <span class="n">lattice</span>

<span class="c1"># find the facade</span>
<span class="n">define</span> <span class="n">stencil</span>

<span class="n">insider</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lattice</span><span class="o">.</span><span class="n">find_neighbors</span><span class="p">(</span><span class="n">stencil</span><span class="p">):</span>
    <span class="n">inside</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">avail</span><span class="p">:</span>
            <span class="n">inside</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">inside</span><span class="p">:</span>
        <span class="n">insider</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">facade</span> <span class="o">=</span> <span class="n">avail_lattice</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">insider</span><span class="p">:</span>
    <span class="n">facade</span><span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">],:]</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># calculate distance to facade</span>
<span class="n">define</span> <span class="n">lattice_cens</span><span class="p">,</span> <span class="n">facade_locs</span>

<span class="n">dist_m</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">voxel_cen</span> <span class="ow">in</span> <span class="n">lattice_cens</span><span class="p">:</span>
    <span class="n">dist_v</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">facade_cen</span> <span class="ow">in</span> <span class="n">facade_locs</span><span class="p">:</span>
        <span class="n">dist_v</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">distance</span> <span class="n">voxel_cen</span> <span class="n">to</span> <span class="n">facade_cen</span><span class="p">)</span>
    <span class="n">dist_m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dist_v</span><span class="p">)</span>
<span class="n">min_dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dist_m</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">make</span> <span class="n">min_dist</span> <span class="n">a</span> <span class="n">lattice</span><span class="p">:</span> <span class="n">envelope_eu_dist_lattice</span>
<span class="n">envelope_eu_dist_lattice</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># visualization and saving</span>
<span class="n">visualize</span>
<span class="n">save</span> <span class="n">to</span> <span class="n">csv</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../a3_massing_intro/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Intro" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Intro
            </div>
          </div>
        </a>
      
      
        
        <a href="../a3_massing_shaping/" class="md-footer__link md-footer__link--next" aria-label="Next: Shaping" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Shaping
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>